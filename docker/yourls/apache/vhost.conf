# YOURLS Apache Virtual Host - Works for both local and production
<VirtualHost *:9001>
    ServerName short.local
    ServerAlias localhost
    ServerAlias 127.0.0.1
    DocumentRoot /var/www/html

    <Directory "/var/www/html">
        Options FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Production-only: Trust CDN forwarded protocol (if behind CDN)
    # This will only work if the header is present (from CDN)
    SetEnvIf X-Forwarded-Proto "https" HTTPS=on
    
    # Security headers
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"

    ErrorLog /proc/self/fd/2
    CustomLog /proc/self/fd/1 combined
</VirtualHost>
